# Программа perfectcrypt

<font color="red"><a>ВНИМАНИЕ: Перед установкой программы, ознакомьтесь с предупреждением о безопасности!</a></font> <a href="/EMERGENCY.md">**Предупреждение** </a>

Данный пакет позволяет создать двойное дно - специальный «смертельный» пароль, который уничтожит все данные на сервере при его вводе на этапе загрузки.
 
## Установка смертельного пароля

После установки пакета, запустите “dpkg-reconfigure perfectcrypt”. В контекстом меню Вы сможете: 
- задать пароль
- изменить уже установленный пароль
- отключить смертельный пароль

## Как это работает?

Пакет заменяет /lib/cryptsetup/askpass на пользовательский скрипт.
Этот скрипт вызывает оригинальную утилиту для получения пароля,
но выполняет дополнительную обработку перед выводом того же пароля в stdout.

Для определения того, какой раздел разблокируется, мы используем переменные окружения,
установленные скриптом /usr/share/initramfs-tools/scripts/local-top/cryptroot.

Для удаления (очистки) ключей шифрования мы выполняем cryptsetup erase <устройство> --batch-mode.

В файле /etc/perfectcrypt/settings.cfg Вы можете редактировать переменные:

- failsleep — сколько секунд cryptsetup будет ждать после
трёхкратного неверного ввода пароля;

- reaction_erase — как cryptsetup поведёт себя, если ключи шифрования
системного тома будут очищены;

- show_author — будет ли выводиться информация об авторе и названии
системы на этапе запроса пароля;

- erase_killed_disks — будет ли запущена автоматическая очистка дисков
после удаления ключевых слотов;

- erase_disk_1, erase_disk_2, erase_disk_3, erase_disk_4 — укажите
UUID дисков, ключевые слоты которых также будут очищены (при необходимости).
По умолчанию — не заданы.



